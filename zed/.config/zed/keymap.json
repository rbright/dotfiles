// Zed keymap
//
// For information on binding keys, see the Zed
// documentation: https://zed.dev/docs/key-bindings
//
// To see the default key bindings run `zed: open default keymap`
// from the command palette.
[
  // Workspace
  {
    "context": "Workspace",
    "bindings": {
      "ctrl-alt-super-p": "git::Worktree",
      "ctrl-alt-super-o": [
        "projects::OpenRemote",
        {
          "from_existing_connection": false,
          "create_new_window": false
        }
      ],
    }
  },
  {
    "context": "os == linux > Workspace",
    "bindings": {
      "ctrl-k ctrl-w": "workspace::CloseAllItemsAndPanes",
      // File Finder
      "ctrl-p": "file_finder::Toggle",
      // Project Picker
      "ctrl-alt-o": [
        "projects::OpenRecent",
        {
          "create_new_window": true
        }
      ],
      // Panels
      "ctrl-?": "agent::ToggleFocus",
      "ctrl-shift-g": "git_panel::ToggleFocus",
      "ctrl-shift-b": "outline_panel::ToggleFocus",
      "ctrl-shift-e": "project_panel::ToggleFocus",
      "ctrl-`": "terminal_panel::Toggle"
    }
  },
  {
    "context": "os == macos > Workspace",
    "bindings": {
      "cmd-k cmd-w": "workspace::CloseAllItemsAndPanes",
      "cmd-shift-w": "workspace::CloseWindow",
      // Editor
      "ctrl-`": "editor::ToggleFocus",
      // File Finder
      "cmd-p": "file_finder::Toggle",
      // Project Picker
      "alt-cmd-o": [
        "projects::OpenRecent",
        {
          "create_new_window": false
        }
      ],
      // Panels
      "cmd-shift-a": "agent::ToggleFocus",
      "ctrl-alt-cmd-shift-g": "git_panel::ToggleFocus",
      "cmd-`": "terminal_panel::Toggle"
    }
  },
  // Pane
  {
    "context": "os == linux > Pane",
    "bindings": {
      "ctrl-alt-[": "pane::ActivatePreviousItem",
      "ctrl-alt-]": "pane::ActivateNextItem",
      "ctrl-w": [
        "pane::CloseActiveItem",
        {
          "close_pinned": false
        }
      ],
      "ctrl-k w": [
        "pane::CloseAllItems",
        {
          "close_pinned": false
        }
      ],
      "ctrl-alt-g": "search::SelectNextMatch"
    },
  },
  {
    "context": "os == macos > Pane",
    "bindings": {
      "cmd-shift-[": "pane::ActivatePreviousItem",
      "cmd-shift-]": "pane::ActivateNextItem",
      "cmd-w": [
        "pane::CloseActiveItem",
        {
          "close_pinned": false
        }
      ],
      "cmd-k w": [
        "pane::CloseAllItems",
        {
          "close_pinned": false
        }
      ],
    },
  },
  // Editor
  {
    "context": "Editor",
    "bindings": {
      "ctrl-shift-i": null
    }
  },
  {
    "context": "Editor && mode == full",
    "bindings": {
      "ctrl-shift-o": "outline::Toggle",
      "ctrl-g": "go_to_line::Toggle",
    },
  },
  {
    "context": "os == linux > Editor",
    "bindings": {
      // Select All
      "ctrl-a": "editor::SelectAll",
      // Pane Navigation
      "ctrl-h": "workspace::ActivatePaneLeft",
      "ctrl-j": "workspace::ActivatePaneDown",
      "ctrl-k": "workspace::ActivatePaneUp",
      "ctrl-l": "workspace::ActivatePaneRight",
      // Pane Splitting
      "ctrl-shift-h": "pane::SplitLeft",
      "ctrl-shift-j": "pane::SplitDown",
      "ctrl-shift-k": "pane::SplitUp",
      "ctrl-shift-l": "pane::SplitRight"
    }
  },
  {
    "context": "os == macos > Editor",
    "bindings": {
      // Select All
      "cmd-a": "editor::SelectAll",
      // Pane Navigation
      "cmd-h": "workspace::ActivatePaneLeft",
      "cmd-j": "workspace::ActivatePaneDown",
      "cmd-k": "workspace::ActivatePaneUp",
      "cmd-l": "workspace::ActivatePaneRight",
      // Pane Splitting
      "cmd-shift-h": "pane::SplitLeft",
      "cmd-shift-j": "pane::SplitDown",
      "cmd-shift-k": "pane::SplitUp",
      "cmd-shift-l": "pane::SplitRight"
    }
  },
  // AgentPanel
  {
    "context": "os == macos > AgentPanel",
    "bindings": {
      "alt-cmd-p": null
    }
  },
  // Git Panel
  {
    "context": "os == macos > (GitPanel && ChangesList)",
    "bindings": {
      "cmd-s": "git::StageFile",
      "cmd-shift-g": "git::GenerateCommitMessage"
    }
  },
  {
    "context": "os == linux > (GitPanel && ChangesList)",
    "bindings": {
      "ctrl-s": "git::StageFile",
      "ctrl-shift-g": "git::GenerateCommitMessage"
    }
  },
  {
    "context": "CommitEditor > Editor",
    "bindings": {
      "alt-tab": null
    }
  },
  {
    "context": "os == linux > (CommitEditor > Editor)",
    "bindings": {
      "ctrl-shift-g": "git::GenerateCommitMessage"
    }
  },
  {
    "context": "os == macos > (CommitEditor > Editor)",
    "bindings": {
      "cmd-shift-g": "git::GenerateCommitMessage"
    }
  },
  {
    "context": "GitCommit > Editor",
    "bindings": {
      "alt-tab": null
    }
  }
]
